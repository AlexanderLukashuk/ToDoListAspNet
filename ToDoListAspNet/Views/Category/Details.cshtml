@model ToDoListAspNetLibrary.Models.Entities.Category

<div class="container">
    <h1>@Model.Name</h1>

    <div class="button-group">
        <form action="/Category/Edit" method="get" class="edit-form">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@Model.Id" />
            <button type="submit" class="btn btn-primary">Edit</button>
        </form>
        <form action="/Category/Delete" method="post" class="delete-form">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@Model.Id" />
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
        <h4>Todos:</h4>
        <ul>
            @foreach (var todo in ViewData["Todos"] as List<ToDoListAspNetLibrary.Models.Entities.ToDo>)
            {
                <li>
                    <div class="todo-name">
                        <form action="/ToDos/Details" method="get" class="details-form">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@todo.Id" />
                            @*<h3>@Html.ActionLink(todo.Name, "Details", new { id = todo.Id })</h3>*@
                            <h3><a href="/ToDos/Details?id=@todo.Id">@todo.Name</a></h3>
                        </form>
                    </div>
                    <div class="list-group-item-btn">
                        <form action="/ToDos/Edit" method="get" class="edit-form">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@todo.Id" />
                            <button type="submit" class="btn btn-primary">Edit</button>
                        </form>
                        <form asp-action="Delete" method="post" class="delete-form">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@todo.Id" />
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>
                        @if (todo.Status == ToDoListAspNetLibrary.Models.Entities.ToDo.ToDoStatus.NotStarted)
                        {
                            <form action="/ToDos/StartToDo" method="post" class="start-form">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@todo.Id" />
                                <button type="submit" class="btn btn-success">Start</button>
                            </form>
                        }
                        else if (todo.Status == ToDoListAspNetLibrary.Models.Entities.ToDo.ToDoStatus.InProgress)
                        {
                            <form action="/ToDos/FinishToDo" method="post" class="finish-form">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@todo.Id" />
                                <button type="submit" class="btn btn-warning">Finish</button>
                            </form>
                        }
                    </div>
                </li>
            }
        </ul>
    </div>

    @*<form action="/ToDos/Create" method="get">
            <input type="hidden" name="categoryId" value="@Model.Id" />
            <button type="submit" class="btn btn-success">Create New ToDo</button>
        </form>*@
    @*<a href="/ToDos/Create?categoryId=@Model.Id"></a>*@
    @*<input type="hidden" name="categoryId" value="@Model.Id" />
        <button type="submit" class="btn btn-success">Create new ToDo</button>*@
    @*</a>*@

    <a href="/ToDos/CreateToDo?categoryId=@Model.Id">Create New ToDo</a>

    <form action="/Category" method="get">
        <button class="btn btn-primary">Return to the main page</button>
    </form>
</div>
